"use strict";

$(function () {
  var _this = this;

  // ALL VARIABLES
  var year = $("#year");
  var video = $("#video");
  var playVideo = $("#play-video");
  var coverVideo = $("#cover-video");
  var iconVideo = $("#icon-video");
  var cVwrapper = $("#control-video-wrapper");
  var closeBanar = $("#close-banar");
  var links = $("#links a");
  var navbar = $("#navbar");
  var header = $("#header");
  var heightNavbar = navbar.outerHeight();
  var heightHeader = header.outerHeight();
  var logoL = $("#logo-l img");
  var scrollToTop = $("#scroll-to-top");
  var closeSidebar = $("#close-sidebar");
  var closeSidebarShopCart = $("#close-sidebar-shop-cart");
  var sidebarNav = $("#sidebar-nav");
  var toggler = $("#toggler");
  var backDrop = $(".back-drop");
  var shoppingCart = $("#shopping-cart");
  var iconCart = $("#icon-cart");
  var deleteItemShopping = $(".delete-item");
  var cartWrapper = $("#cart-wrapper");

  //
  $(window).scrollTop(0);

  /////////////////////////////////
  //// CLICK
  // VIDEO - PLAY AND PAUSE
  playVideo.on("click", function () {
    var getAttrIconVideo = iconVideo.attr("xlink:href");
    var srcIcon = getAttrIconVideo.split("#")[0];
    //
    coverVideo.toggleClass("opacity-0");
    cVwrapper.toggleClass("control-hover");

    //
    if (!$(this).hasClass("play")) {
      $(this).addClass("play");
      iconVideo.attr("xlink:href", srcIcon + "#icon-pause");
      video[0].play();
      return;
    }

    //
    $(this).removeClass("play");
    iconVideo.attr("xlink:href", srcIcon + "#icon-play-video");
    video[0].pause();
  });

  // CHANGE ACTIVE CLASS ON LINKS
  links.on("click", function () {
    $(this).addClass("text-como").siblings().removeClass("text-como");
    closeSidebarNav();
  });

  // CLOSE BANAR
  closeBanar.on("click", function () {
    $(this).parent().slideUp();
  });
  // SCROLL TO TOP SMOOTHLY
  scrollToTop.on("click", function () {
    window.scrollTo({
      top: 0,
      left: 0,
      behavior: "smooth"
    });
  });

  /////////////////////////////////
  //// FUNCTIONS
  var _fixedNavbar = function _fixedNavbar() {
    if ($(_this).scrollTop() > heightNavbar) {
      navbar.removeClass("sm:absolute sm:bg-transparent");
      navbar.addClass("fixed sm:bg-plantation");
      logoL.css("max-height", "50px");
      return;
    }

    navbar.addClass("sm:absolute sm:bg-transparent");
    navbar.removeClass("fixed sm:bg-plantation");
    logoL.css("max-height", "100px");
  };

  var showBtnScrollToTop = function showBtnScrollToTop() {
    if ($(_this).scrollTop() > heightHeader) {
      scrollToTop.addClass("-translate-y-10");
      scrollToTop.removeClass("translate-y-48");
      return;
    }

    scrollToTop.addClass("translate-y-48");
    scrollToTop.removeClass("-translate-y-10");
  };

  // SCROLL WILL TRIGGER ONE MORE THAN FUNCTION
  $(window).on("scroll", function () {
    //
    _fixedNavbar();
    //
    showBtnScrollToTop();
  });

  // SLIDER
  $(".owl-carousel").owlCarousel({
    items: 1,
    animateOut: "fadeOut",
    autoplay: true,
    autoplayTimeout: 3000,
    autoplayHoverPause: true,
    loop: true
  });

  function openSidebarNav() {
    sidebarNav.toggleClass("translate-x-0 -translate-x-full");
    backDrop.toggleClass("block hidden");
    $("body, html").css("overflow-y", "hidden");
  }

  function closeSidebarNav() {
    sidebarNav.addClass("translate-x-0 -translate-x-full");
    backDrop.toggleClass("block hidden");
    $("body, html").css("overflow-y", "visible");
  }

  if ($(document).outerWidth() <= 640) {
    toggler.on("click", function () {
      return openSidebarNav();
    });
    closeSidebar.on("click", function () {
      return closeSidebarNav();
    });
  }

  /////////////////////////////////
  //// SHOPPING CART
  // TOGGLE SHOPPING CART
  iconCart.on("click", function (e) {
    e.stopPropagation();
    if ($(document).outerWidth() > 640) {
      return shoppingCart.slideToggle(200);
    }
    shoppingCart.toggleClass("-translate-x-full sm:hidden");
    backDrop.toggleClass("block hidden");
    $("body, html").css("overflow-y", "hidden");
  });

  // CLOSE SIDEBAR SHOP cart
  closeSidebarShopCart.on("click", function (e) {
    e.stopPropagation();
    shoppingCart.toggleClass("-translate-x-full");
    backDrop.toggleClass("block hidden");
    $("body, html").css("overflow-y", "visible");
  });

  // IF CLICKED ON SHOPPING CART WILL CLOSED
  shoppingCart.on("click", function (e) {
    if ($(document).outerWidth() <= 640) {
      closeSidebarShopCart.trigger("click");
    }
  });

  // DELETE ITEM FROM SHOPPING cart
  deleteItemShopping.on("click", function (e) {
    e.stopPropagation();
    $(this).parent().remove();
  });

  // GLOBAL - IF CLICKED ON WINDOW
  $(window).on("click", function () {
    if ($(document).outerWidth() > 640) {
      shoppingCart.slideUp(200);
    }
  });

  // ADD YAER
  year.text(new Date().getFullYear());
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsInllYXIiLCJ2aWRlbyIsInBsYXlWaWRlbyIsImNvdmVyVmlkZW8iLCJpY29uVmlkZW8iLCJjVndyYXBwZXIiLCJjbG9zZUJhbmFyIiwibGlua3MiLCJuYXZiYXIiLCJoZWFkZXIiLCJoZWlnaHROYXZiYXIiLCJvdXRlckhlaWdodCIsImhlaWdodEhlYWRlciIsImxvZ29MIiwic2Nyb2xsVG9Ub3AiLCJjbG9zZVNpZGViYXIiLCJjbG9zZVNpZGViYXJTaG9wQ2FydCIsInNpZGViYXJOYXYiLCJ0b2dnbGVyIiwiYmFja0Ryb3AiLCJzaG9wcGluZ0NhcnQiLCJpY29uQ2FydCIsImRlbGV0ZUl0ZW1TaG9wcGluZyIsImNhcnRXcmFwcGVyIiwid2luZG93Iiwic2Nyb2xsVG9wIiwib24iLCJnZXRBdHRySWNvblZpZGVvIiwiYXR0ciIsInNyY0ljb24iLCJzcGxpdCIsInRvZ2dsZUNsYXNzIiwiaGFzQ2xhc3MiLCJhZGRDbGFzcyIsInBsYXkiLCJyZW1vdmVDbGFzcyIsInBhdXNlIiwic2libGluZ3MiLCJjbG9zZVNpZGViYXJOYXYiLCJwYXJlbnQiLCJzbGlkZVVwIiwic2Nyb2xsVG8iLCJ0b3AiLCJsZWZ0IiwiYmVoYXZpb3IiLCJfZml4ZWROYXZiYXIiLCJjc3MiLCJzaG93QnRuU2Nyb2xsVG9Ub3AiLCJvd2xDYXJvdXNlbCIsIml0ZW1zIiwiYW5pbWF0ZU91dCIsImF1dG9wbGF5IiwiYXV0b3BsYXlUaW1lb3V0IiwiYXV0b3BsYXlIb3ZlclBhdXNlIiwibG9vcCIsIm9wZW5TaWRlYmFyTmF2IiwiZG9jdW1lbnQiLCJvdXRlcldpZHRoIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsInNsaWRlVG9nZ2xlIiwidHJpZ2dlciIsInJlbW92ZSIsInRleHQiLCJEYXRlIiwiZ2V0RnVsbFllYXIiXSwibWFwcGluZ3MiOiI7O0FBQUFBLEVBQUUsWUFBWTtBQUFBOztBQUNaO0FBQ0EsTUFBTUMsT0FBT0QsRUFBRSxPQUFGLENBQWI7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QUFPO0FBQzlCLFFBQUkzRCxFQUFFeUQsUUFBRixFQUFZQyxVQUFaLE1BQTRCLEdBQWhDLEVBQXFDO0FBQ25DekMsMkJBQXFCNkMsT0FBckIsQ0FBNkIsT0FBN0I7QUFDRDtBQUNGLEdBSkQ7O0FBTUE7QUFDQXZDLHFCQUFtQkksRUFBbkIsQ0FBc0IsT0FBdEIsRUFBK0IsVUFBVWdDLENBQVYsRUFBYTtBQUMxQ0EsTUFBRUMsZUFBRjtBQUNBNUQsTUFBRSxJQUFGLEVBQVF3QyxNQUFSLEdBQWlCdUIsTUFBakI7QUFDRCxHQUhEOztBQUtBO0FBQ0EvRCxJQUFFeUIsTUFBRixFQUFVRSxFQUFWLENBQWEsT0FBYixFQUFzQixZQUFNO0FBQzFCLFFBQUkzQixFQUFFeUQsUUFBRixFQUFZQyxVQUFaLEtBQTJCLEdBQS9CLEVBQW9DO0FBQ2xDckMsbUJBQWFvQixPQUFiLENBQXFCLEdBQXJCO0FBQ0Q7QUFDRixHQUpEOztBQU1BO0FBQ0F4QyxPQUFLK0QsSUFBTCxDQUFVLElBQUlDLElBQUosR0FBV0MsV0FBWCxFQUFWO0FBQ0QsQ0FoTEQiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZnVuY3Rpb24gKCkge1xuICAvLyBBTEwgVkFSSUFCTEVTXG4gIGNvbnN0IHllYXIgPSAkKFwiI3llYXJcIik7XG4gIGNvbnN0IHZpZGVvID0gJChcIiN2aWRlb1wiKTtcbiAgY29uc3QgcGxheVZpZGVvID0gJChcIiNwbGF5LXZpZGVvXCIpO1xuICBjb25zdCBjb3ZlclZpZGVvID0gJChcIiNjb3Zlci12aWRlb1wiKTtcbiAgY29uc3QgaWNvblZpZGVvID0gJChcIiNpY29uLXZpZGVvXCIpO1xuICBjb25zdCBjVndyYXBwZXIgPSAkKFwiI2NvbnRyb2wtdmlkZW8td3JhcHBlclwiKTtcbiAgY29uc3QgY2xvc2VCYW5hciA9ICQoXCIjY2xvc2UtYmFuYXJcIik7XG4gIGNvbnN0IGxpbmtzID0gJChcIiNsaW5rcyBhXCIpO1xuICBjb25zdCBuYXZiYXIgPSAkKFwiI25hdmJhclwiKTtcbiAgY29uc3QgaGVhZGVyID0gJChcIiNoZWFkZXJcIik7XG4gIGNvbnN0IGhlaWdodE5hdmJhciA9IG5hdmJhci5vdXRlckhlaWdodCgpO1xuICBjb25zdCBoZWlnaHRIZWFkZXIgPSBoZWFkZXIub3V0ZXJIZWlnaHQoKTtcbiAgY29uc3QgbG9nb0wgPSAkKFwiI2xvZ28tbCBpbWdcIik7XG4gIGNvbnN0IHNjcm9sbFRvVG9wID0gJChcIiNzY3JvbGwtdG8tdG9wXCIpO1xuICBjb25zdCBjbG9zZVNpZGViYXIgPSAkKFwiI2Nsb3NlLXNpZGViYXJcIik7XG4gIGNvbnN0IGNsb3NlU2lkZWJhclNob3BDYXJ0ID0gJChcIiNjbG9zZS1zaWRlYmFyLXNob3AtY2FydFwiKTtcbiAgY29uc3Qgc2lkZWJhck5hdiA9ICQoXCIjc2lkZWJhci1uYXZcIik7XG4gIGNvbnN0IHRvZ2dsZXIgPSAkKFwiI3RvZ2dsZXJcIik7XG4gIGNvbnN0IGJhY2tEcm9wID0gJChcIi5iYWNrLWRyb3BcIik7XG4gIGNvbnN0IHNob3BwaW5nQ2FydCA9ICQoXCIjc2hvcHBpbmctY2FydFwiKTtcbiAgY29uc3QgaWNvbkNhcnQgPSAkKFwiI2ljb24tY2FydFwiKTtcbiAgY29uc3QgZGVsZXRlSXRlbVNob3BwaW5nID0gJChcIi5kZWxldGUtaXRlbVwiKTtcbiAgY29uc3QgY2FydFdyYXBwZXIgPSAkKFwiI2NhcnQtd3JhcHBlclwiKTtcblxuICAvL1xuICAkKHdpbmRvdykuc2Nyb2xsVG9wKDApO1xuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAvLy8vIENMSUNLXG4gIC8vIFZJREVPIC0gUExBWSBBTkQgUEFVU0VcbiAgcGxheVZpZGVvLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGdldEF0dHJJY29uVmlkZW8gPSBpY29uVmlkZW8uYXR0cihcInhsaW5rOmhyZWZcIik7XG4gICAgY29uc3Qgc3JjSWNvbiA9IGdldEF0dHJJY29uVmlkZW8uc3BsaXQoXCIjXCIpWzBdO1xuICAgIC8vXG4gICAgY292ZXJWaWRlby50b2dnbGVDbGFzcyhcIm9wYWNpdHktMFwiKTtcbiAgICBjVndyYXBwZXIudG9nZ2xlQ2xhc3MoXCJjb250cm9sLWhvdmVyXCIpO1xuXG4gICAgLy9cbiAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoXCJwbGF5XCIpKSB7XG4gICAgICAkKHRoaXMpLmFkZENsYXNzKFwicGxheVwiKTtcbiAgICAgIGljb25WaWRlby5hdHRyKFwieGxpbms6aHJlZlwiLCBgJHtzcmNJY29ufSNpY29uLXBhdXNlYCk7XG4gICAgICB2aWRlb1swXS5wbGF5KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy9cbiAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKFwicGxheVwiKTtcbiAgICBpY29uVmlkZW8uYXR0cihcInhsaW5rOmhyZWZcIiwgYCR7c3JjSWNvbn0jaWNvbi1wbGF5LXZpZGVvYCk7XG4gICAgdmlkZW9bMF0ucGF1c2UoKTtcbiAgfSk7XG5cbiAgLy8gQ0hBTkdFIEFDVElWRSBDTEFTUyBPTiBMSU5LU1xuICBsaW5rcy5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAkKHRoaXMpLmFkZENsYXNzKFwidGV4dC1jb21vXCIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoXCJ0ZXh0LWNvbW9cIik7XG4gICAgY2xvc2VTaWRlYmFyTmF2KCk7XG4gIH0pO1xuXG4gIC8vIENMT1NFIEJBTkFSXG4gIGNsb3NlQmFuYXIub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgJCh0aGlzKS5wYXJlbnQoKS5zbGlkZVVwKCk7XG4gIH0pO1xuICAvLyBTQ1JPTEwgVE8gVE9QIFNNT09USExZXG4gIHNjcm9sbFRvVG9wLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIHdpbmRvdy5zY3JvbGxUbyh7XG4gICAgICB0b3A6IDAsXG4gICAgICBsZWZ0OiAwLFxuICAgICAgYmVoYXZpb3I6IFwic21vb3RoXCIsXG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAvLy8vIEZVTkNUSU9OU1xuICBjb25zdCBfZml4ZWROYXZiYXIgPSAoKSA9PiB7XG4gICAgaWYgKCQodGhpcykuc2Nyb2xsVG9wKCkgPiBoZWlnaHROYXZiYXIpIHtcbiAgICAgIG5hdmJhci5yZW1vdmVDbGFzcyhcInNtOmFic29sdXRlIHNtOmJnLXRyYW5zcGFyZW50XCIpO1xuICAgICAgbmF2YmFyLmFkZENsYXNzKFwiZml4ZWQgc206YmctcGxhbnRhdGlvblwiKTtcbiAgICAgIGxvZ29MLmNzcyhcIm1heC1oZWlnaHRcIiwgXCI1MHB4XCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG5hdmJhci5hZGRDbGFzcyhcInNtOmFic29sdXRlIHNtOmJnLXRyYW5zcGFyZW50XCIpO1xuICAgIG5hdmJhci5yZW1vdmVDbGFzcyhcImZpeGVkIHNtOmJnLXBsYW50YXRpb25cIik7XG4gICAgbG9nb0wuY3NzKFwibWF4LWhlaWdodFwiLCBcIjEwMHB4XCIpO1xuICB9O1xuXG4gIGNvbnN0IHNob3dCdG5TY3JvbGxUb1RvcCA9ICgpID0+IHtcbiAgICBpZiAoJCh0aGlzKS5zY3JvbGxUb3AoKSA+IGhlaWdodEhlYWRlcikge1xuICAgICAgc2Nyb2xsVG9Ub3AuYWRkQ2xhc3MoXCItdHJhbnNsYXRlLXktMTBcIik7XG4gICAgICBzY3JvbGxUb1RvcC5yZW1vdmVDbGFzcyhcInRyYW5zbGF0ZS15LTQ4XCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNjcm9sbFRvVG9wLmFkZENsYXNzKFwidHJhbnNsYXRlLXktNDhcIik7XG4gICAgc2Nyb2xsVG9Ub3AucmVtb3ZlQ2xhc3MoXCItdHJhbnNsYXRlLXktMTBcIik7XG4gIH07XG5cbiAgLy8gU0NST0xMIFdJTEwgVFJJR0dFUiBPTkUgTU9SRSBUSEFOIEZVTkNUSU9OXG4gICQod2luZG93KS5vbihcInNjcm9sbFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgLy9cbiAgICBfZml4ZWROYXZiYXIoKTtcbiAgICAvL1xuICAgIHNob3dCdG5TY3JvbGxUb1RvcCgpO1xuICB9KTtcblxuICAvLyBTTElERVJcbiAgJChcIi5vd2wtY2Fyb3VzZWxcIikub3dsQ2Fyb3VzZWwoe1xuICAgIGl0ZW1zOiAxLFxuICAgIGFuaW1hdGVPdXQ6IFwiZmFkZU91dFwiLFxuICAgIGF1dG9wbGF5OiB0cnVlLFxuICAgIGF1dG9wbGF5VGltZW91dDogMzAwMCxcbiAgICBhdXRvcGxheUhvdmVyUGF1c2U6IHRydWUsXG4gICAgbG9vcDogdHJ1ZSxcbiAgfSk7XG5cbiAgZnVuY3Rpb24gb3BlblNpZGViYXJOYXYoKSB7XG4gICAgc2lkZWJhck5hdi50b2dnbGVDbGFzcyhcInRyYW5zbGF0ZS14LTAgLXRyYW5zbGF0ZS14LWZ1bGxcIik7XG4gICAgYmFja0Ryb3AudG9nZ2xlQ2xhc3MoXCJibG9jayBoaWRkZW5cIik7XG4gICAgJChcImJvZHksIGh0bWxcIikuY3NzKFwib3ZlcmZsb3cteVwiLCBcImhpZGRlblwiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsb3NlU2lkZWJhck5hdigpIHtcbiAgICBzaWRlYmFyTmF2LmFkZENsYXNzKFwidHJhbnNsYXRlLXgtMCAtdHJhbnNsYXRlLXgtZnVsbFwiKTtcbiAgICBiYWNrRHJvcC50b2dnbGVDbGFzcyhcImJsb2NrIGhpZGRlblwiKTtcbiAgICAkKFwiYm9keSwgaHRtbFwiKS5jc3MoXCJvdmVyZmxvdy15XCIsIFwidmlzaWJsZVwiKTtcbiAgfVxuXG4gIGlmICgkKGRvY3VtZW50KS5vdXRlcldpZHRoKCkgPD0gNjQwKSB7XG4gICAgdG9nZ2xlci5vbihcImNsaWNrXCIsICgpID0+IG9wZW5TaWRlYmFyTmF2KCkpO1xuICAgIGNsb3NlU2lkZWJhci5vbihcImNsaWNrXCIsICgpID0+IGNsb3NlU2lkZWJhck5hdigpKTtcbiAgfVxuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAvLy8vIFNIT1BQSU5HIENBUlRcbiAgLy8gVE9HR0xFIFNIT1BQSU5HIENBUlRcbiAgaWNvbkNhcnQub24oXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgaWYgKCQoZG9jdW1lbnQpLm91dGVyV2lkdGgoKSA+IDY0MCkge1xuICAgICAgcmV0dXJuIHNob3BwaW5nQ2FydC5zbGlkZVRvZ2dsZSgyMDApO1xuICAgIH1cbiAgICBzaG9wcGluZ0NhcnQudG9nZ2xlQ2xhc3MoXCItdHJhbnNsYXRlLXgtZnVsbCBzbTpoaWRkZW5cIik7XG4gICAgYmFja0Ryb3AudG9nZ2xlQ2xhc3MoXCJibG9jayBoaWRkZW5cIik7XG4gICAgJChcImJvZHksIGh0bWxcIikuY3NzKFwib3ZlcmZsb3cteVwiLCBcImhpZGRlblwiKTtcbiAgfSk7XG5cbiAgLy8gQ0xPU0UgU0lERUJBUiBTSE9QIGNhcnRcbiAgY2xvc2VTaWRlYmFyU2hvcENhcnQub24oXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgc2hvcHBpbmdDYXJ0LnRvZ2dsZUNsYXNzKFwiLXRyYW5zbGF0ZS14LWZ1bGxcIik7XG4gICAgYmFja0Ryb3AudG9nZ2xlQ2xhc3MoXCJibG9jayBoaWRkZW5cIik7XG4gICAgJChcImJvZHksIGh0bWxcIikuY3NzKFwib3ZlcmZsb3cteVwiLCBcInZpc2libGVcIik7XG4gIH0pO1xuXG4gIC8vIElGIENMSUNLRUQgT04gU0hPUFBJTkcgQ0FSVCBXSUxMIENMT1NFRFxuICBzaG9wcGluZ0NhcnQub24oXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGlmICgkKGRvY3VtZW50KS5vdXRlcldpZHRoKCkgPD0gNjQwKSB7XG4gICAgICBjbG9zZVNpZGViYXJTaG9wQ2FydC50cmlnZ2VyKFwiY2xpY2tcIik7XG4gICAgfVxuICB9KTtcblxuICAvLyBERUxFVEUgSVRFTSBGUk9NIFNIT1BQSU5HIGNhcnRcbiAgZGVsZXRlSXRlbVNob3BwaW5nLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICQodGhpcykucGFyZW50KCkucmVtb3ZlKCk7XG4gIH0pO1xuXG4gIC8vIEdMT0JBTCAtIElGIENMSUNLRUQgT04gV0lORE9XXG4gICQod2luZG93KS5vbihcImNsaWNrXCIsICgpID0+IHtcbiAgICBpZiAoJChkb2N1bWVudCkub3V0ZXJXaWR0aCgpID4gNjQwKSB7XG4gICAgICBzaG9wcGluZ0NhcnQuc2xpZGVVcCgyMDApO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gQUREIFlBRVJcbiAgeWVhci50ZXh0KG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSk7XG59KTtcbiJdfQ==
